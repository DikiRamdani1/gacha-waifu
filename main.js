const hero = [{
        "name": "Chisato",
        "elemen": "Air",
        "role": "Fighter",
        "rating": "SSR",
        "voice": "Aku cantik ya.",
        "src": "images/image1.jpg",
        "cerita": "Cerita na eweh Cerita na eweh Cerita na eweh Cerita na eweh Cerita na eweh Cerita na ewehCerita na eweh Cerita na eweh Cerita na eweh Cerita na eweh  Cerita na eweh Cerita na eweh Cerita na eweh Cerita na ewehCerita na eweh Cerita na eweh Cerita na eweh Cerita na eweh Cerita na eweh",
    },
    {
        "name": "Albedo",
        "elemen": "Gelap",
        "role": "Tank",
        "rating": "SSR",
        "voice": "Indah nya gunung itu.",
        "src": "images/image3.jpg",
        "cerita": "Cerita na eweh Cerita na eweh Cerita na eweh Cerita na eweh Cerita na eweh Cerita na ewehCerita na eweh Cerita na eweh Cerita na eweh Cerita na eweh  Cerita na eweh Cerita na eweh Cerita na eweh Cerita na ewehCerita na eweh Cerita na eweh Cerita na eweh Cerita na eweh Cerita na eweh",

    },
    {
        "name": "Makima",
        "elemen": "Api",
        "role": "Mage",
        "rating": "SSR",
        "voice": "Aku cantik ya.",
        "src": "images/image2.jpg",
        "cerita": "Cerita na eweh Cerita na eweh Cerita na eweh Cerita na eweh Cerita na eweh Cerita na ewehCerita na eweh Cerita na eweh Cerita na eweh Cerita na eweh  Cerita na eweh Cerita na eweh Cerita na eweh Cerita na ewehCerita na eweh Cerita na eweh Cerita na eweh Cerita na eweh Cerita na eweh",

    },
    {
        "name": "Tatsumaki",
        "elemen": "Angin",
        "role": "Tank",
        "rating": "SSR",
        "voice": "Ihhh... Takut gede.",
        "src": "images/image7.jpg",
        "cerita": "Cerita na eweh Cerita na eweh Cerita na eweh Cerita na eweh Cerita na eweh Cerita na ewehCerita na eweh Cerita na eweh Cerita na eweh Cerita na eweh  Cerita na eweh Cerita na eweh Cerita na eweh Cerita na ewehCerita na eweh Cerita na eweh Cerita na eweh Cerita na eweh Cerita na eweh",

    },
    {
        "name": "Lararia",
        "elemen": "Api",
        "role": "Mage",
        "rating": "R",
        "voice": "Ohh.. Dagingku",
        "src": "images/image5.jpg",
        "cerita": "Cerita na eweh Cerita na eweh Cerita na eweh Cerita na eweh Cerita na eweh Cerita na ewehCerita na eweh Cerita na eweh Cerita na eweh Cerita na eweh  Cerita na eweh Cerita na eweh Cerita na eweh Cerita na ewehCerita na eweh Cerita na eweh Cerita na eweh Cerita na eweh Cerita na eweh",

    },
    {
        "name": "Altoria",
        "elemen": "Cahaya",
        "role": "Mage",
        "rating": "SSR",
        "voice": "Kegelapan harus di terangkan.",
        "src": "images/image6.jpg",
        "cerita": "Cerita na eweh Cerita na eweh Cerita na eweh Cerita na eweh Cerita na eweh Cerita na ewehCerita na eweh Cerita na eweh Cerita na eweh Cerita na eweh  Cerita na eweh Cerita na eweh Cerita na eweh Cerita na ewehCerita na eweh Cerita na eweh Cerita na eweh Cerita na eweh Cerita na eweh",

    },
    {
        "name": "Yuyi",
        "elemen": "Air",
        "role": "Tank",
        "rating": "R",
        "voice": "Ayo kita udud.",
        "src": "images/image4.jpg",
        "cerita": "Cerita na eweh Cerita na eweh Cerita na eweh Cerita na eweh Cerita na eweh Cerita na ewehCerita na eweh Cerita na eweh Cerita na eweh Cerita na eweh  Cerita na eweh Cerita na eweh Cerita na eweh Cerita na ewehCerita na eweh Cerita na eweh Cerita na eweh Cerita na eweh Cerita na eweh",

    },
    {
        "name": "Ralika",
        "elemen": "Api",
        "role": "Mage",
        "rating": "R",
        "voice": "Lindungi Gunung Kita",
        "src": "images/image8.jpg",
        "cerita": "Cerita na eweh Cerita na eweh Cerita na eweh Cerita na eweh Cerita na eweh Cerita na ewehCerita na eweh Cerita na eweh Cerita na eweh Cerita na eweh  Cerita na eweh Cerita na eweh Cerita na eweh Cerita na ewehCerita na eweh Cerita na eweh Cerita na eweh Cerita na eweh Cerita na eweh",

    },
    {
        "name": "Hina",
        "elemen": "Air",
        "role": "Tank",
        "rating": "R",
        "voice": "Haduh..",
        "src": "images/image9.jpg",
        "cerita": "Cerita na eweh Cerita na eweh Cerita na eweh Cerita na eweh Cerita na eweh Cerita na ewehCerita na eweh Cerita na eweh Cerita na eweh Cerita na eweh  Cerita na eweh Cerita na eweh Cerita na eweh Cerita na ewehCerita na eweh Cerita na eweh Cerita na eweh Cerita na eweh Cerita na eweh",

    },
    {
        "name": "Loren",
        "elemen": "Cahaya",
        "role": "Mage",
        "rating": "R",
        "voice": "Berdoalah.",
        "src": "images/image10.jpg",
        "cerita": "Cerita na eweh Cerita na eweh Cerita na eweh Cerita na eweh Cerita na eweh Cerita na ewehCerita na eweh Cerita na eweh Cerita na eweh Cerita na eweh  Cerita na eweh Cerita na eweh Cerita na eweh Cerita na ewehCerita na eweh Cerita na eweh Cerita na eweh Cerita na eweh Cerita na eweh",

    },
    {
        "name": "Gira",
        "elemen": "Dark",
        "role": "Mage",
        "rating": "R",
        "voice": "...",
        "src": "images/image11.jpg",
        "cerita": "Cerita na eweh Cerita na eweh Cerita na eweh Cerita na eweh Cerita na eweh Cerita na ewehCerita na eweh Cerita na eweh Cerita na eweh Cerita na eweh  Cerita na eweh Cerita na eweh Cerita na eweh Cerita na ewehCerita na eweh Cerita na eweh Cerita na eweh Cerita na eweh Cerita na eweh",

    },
    {
        "name": "Mira",
        "elemen": "Cahaya",
        "role": "Mage",
        "rating": "SR",
        "voice": "...",
        "src": "images/image12.jpg",
        "cerita": "Cerita na eweh Cerita na eweh Cerita na eweh Cerita na eweh Cerita na eweh Cerita na ewehCerita na eweh Cerita na eweh Cerita na eweh Cerita na eweh  Cerita na eweh Cerita na eweh Cerita na eweh Cerita na ewehCerita na eweh Cerita na eweh Cerita na eweh Cerita na eweh Cerita na eweh",

    },
    {
        "name": "Jerani",
        "elemen": "Dark",
        "role": "Mage",
        "rating": "SSR",
        "voice": ".",
        "src": "images/image13.jpg",
        "cerita": "Cerita na eweh Cerita na eweh Cerita na eweh Cerita na eweh Cerita na eweh Cerita na ewehCerita na eweh Cerita na eweh Cerita na eweh Cerita na eweh  Cerita na eweh Cerita na eweh Cerita na eweh Cerita na ewehCerita na eweh Cerita na eweh Cerita na eweh Cerita na eweh Cerita na eweh",

    },
    {
        "name": "Sahina",
        "elemen": "Cahaya",
        "role": "Tank",
        "rating": "R",
        "voice": ".",
        "src": "images/image14.jpg",
        "cerita": "Cerita na eweh Cerita na eweh Cerita na eweh Cerita na eweh Cerita na eweh Cerita na ewehCerita na eweh Cerita na eweh Cerita na eweh Cerita na eweh  Cerita na eweh Cerita na eweh Cerita na eweh Cerita na ewehCerita na eweh Cerita na eweh Cerita na eweh Cerita na eweh Cerita na eweh",

    },
    {
        "name": "Fita",
        "elemen": "Angin",
        "role": "Mage",
        "rating": "SR",
        "voice": "...",
        "src": "images/image15.jpg",
        "cerita": "Cerita na eweh Cerita na eweh Cerita na eweh Cerita na eweh Cerita na eweh Cerita na ewehCerita na eweh Cerita na eweh Cerita na eweh Cerita na eweh  Cerita na eweh Cerita na eweh Cerita na eweh Cerita na ewehCerita na eweh Cerita na eweh Cerita na eweh Cerita na eweh Cerita na eweh",

    },
    {
        "name": "Cera",
        "elemen": "Dark",
        "role": "Fighter",
        "rating": "SSR",
        "voice": "Berdoalah.",
        "src": "images/image16.jpg",
        "cerita": "Cerita na eweh Cerita na eweh Cerita na eweh Cerita na eweh Cerita na eweh Cerita na ewehCerita na eweh Cerita na eweh Cerita na eweh Cerita na eweh  Cerita na eweh Cerita na eweh Cerita na eweh Cerita na ewehCerita na eweh Cerita na eweh Cerita na eweh Cerita na eweh Cerita na eweh",

    },
]

const inventory = []
const gacha = []
const cardResult = []
const randomNumber = []
let z = 0
let a = -1
let b = -1
let c = 0
const body = document.body
const container = document.getElementById("container")
const contentGacha = document.getElementById("content-gacha")
const btnGacha = document.getElementById("gacha")
const btn1Kali = document.getElementById("gacha-1kali")
const btnClose = document.getElementById("close")
const btnGachaAgain = document.getElementById("gacha-again")
const video = document.getElementById("video")
const cardBtnGacha = document.getElementById("card-btnGacha")
const content = document.getElementById("content")
const listApi = document.getElementById("list-api")
const api = document.getElementById("api")
const listAir = document.getElementById("list-air")
const air = document.getElementById("air")
const listAngin = document.getElementById("list-angin")
const angin = document.getElementById("angin")
const listCahaya = document.getElementById("list-cahaya")
const cahaya = document.getElementById("cahaya")
const listGelap = document.getElementById("list-gelap")
const gelap = document.getElementById("gelap")
const inevenApi = document.getElementById("invenApi")
const invenAir = document.getElementById("invenAir")
const invenAngin = document.getElementById("invenAngin")
const invenCahaya = document.getElementById("invenCahaya")
const invenGelap = document.getElementById("invenGelap")
const nameContent = document.getElementById("name-content")
const btnInventory = document.getElementById("btnInventory")
const cardInventory = document.getElementById("inventory")
const contentInventory = document.getElementById("content-inventory")
const showInventory = document.getElementById("showInventory")
const closeBtnInventory = document.getElementById("closeInventory")
const hasilGacha = document.getElementById("hasilGacha")
const imgHasilGacha = document.getElementById("imgHasilGacha")
const namaHasilGacha = document.getElementById("namaHasilGacha")
const roleHasilGacha = document.getElementById("roleHasilGacha")
const ratingHasilGacha = document.getElementById("ratingHasilGacha")
const btnNext = document.getElementById("btnNext")

const handleImage = (card, randomNum) => {
    const image = document.createElement("img")
    image.src = hero[randomNum].src
    image.classList.add("image")
    card.append(image)
}

const styleCard = (card, rating) => {
    if (rating == "SSR") {
        card.classList.add("card")
        card.style.border = "2px solid yellow"
    } else if (rating == "SR") {
        card.classList.add("card")
        card.style.border = "2px solid purple"
    } else if (rating == "R") {
        card.classList.add("card")
        card.style.border = "2px solid blue"
    }
}

const handlePushInventory = async () => {
    for (i = 0; i < 10; i++) {
        const randomNum = Math.floor(Math.random() * 16) + 0
        randomNumber.push(randomNum)
    }
    console.log(randomNumber)

    video.style.zIndex = "161"
    video.play()

    await new Promise((resolve) => setTimeout(resolve, 7500))

    video.style.zIndex = "-10"
    const load = document.createElement("div")
    load.classList.add("load")
    load.style.backgroundColor = "black"
    contentGacha.append(load)

    await new Promise((resolve) => setTimeout(resolve, 100))

    load.style.backgroundColor = "black"

    await new Promise((resolve) => setTimeout(resolve, 500))

    load.style.backgroundColor = "transparent"
    load.style.transition = "0.9s"

    await new Promise((resolve) => setTimeout(resolve, 100))

    load.remove()

    imgHasilGacha.src = hero[randomNumber[0]].src
    namaHasilGacha.textContent = hero[randomNumber[0]].name
    roleHasilGacha.textContent = `${hero[randomNumber[0]].role}/${hero[randomNumber[0]].elemen}`
    ratingHasilGacha.textContent = hero[randomNumber[0]].rating
}

btnNext.addEventListener("click", async () => {
    z++
    b++
    let d = await c
    const load = document.createElement("div")
    let a = -1
    if (b == 9) {
        load.style.zIndex = "-1"
        contentGacha.style.display = "grid"
        contentGacha.style.justifyContent = "space-evenly"
        contentGacha.style.paddingTop ="40px"
        hasilGacha.style.display = "none"
        const interval = setInterval(() => {
            a++
            console.log(`a=${a}`)
            inventory.push(hero[randomNumber[a]])
            const data = inventory.length - 1
            const card = document.createElement("div")
            styleCard(card, inventory[data].rating)
            contentGacha.append(card)
            handleImage(card, randomNumber[a])
            gacha.push(card)
        }, 400)

        setTimeout(async () => {
            z = 0
            a = -1
            b = -1
            await randomNumber.splice(0, randomNumber.length)
            clearInterval(interval)
        }, 4000)
    } else if (d == 1) {
        load.style.zIndex = "-1"
        hasilGacha.style.display = "none"
        contentGacha.style.paddingTop ="40px"
            console.log(`a=${0}`)
            inventory.push(hero[randomNumber[0]])
            const data = inventory.length - 1
            const card = document.createElement("div")
            card.style.width = "250px"
            card.style.height = "360px"
            styleCard(card, inventory[data].rating)
            contentGacha.append(card)
            contentGacha.style.display = "flex"
            contentGacha.style.justifyContent = "center"
            handleImage(card, randomNumber[0])
            gacha.push(card)
            z = 0
            b = -1
            c = 0
    }
    console.log(`z=z${z}`)
    const number = await randomNumber
    load.classList.add("load")
    contentGacha.append(load)
    await new Promise((resolve) => setTimeout(resolve, 100))

    load.style.backgroundColor = "black"

    await new Promise((resolve) => setTimeout(resolve, 500))

    load.style.transition = "0.4s"
    load.style.backgroundColor = "transparent"
    imgHasilGacha.src = hero[randomNumber[z]].src
    namaHasilGacha.textContent = hero[randomNumber[z]].name
    roleHasilGacha.textContent = `${hero[randomNumber[z]].role}/${hero[randomNumber[z]].elemen}`
    ratingHasilGacha.textContent = hero[randomNumber[z]].rating

    await new Promise((resolve) => setTimeout(resolve, 100))

    load.remove()


})

btnGacha.addEventListener("click", () => {
    handlePushInventory()
    hasilGacha.style.display = "flex"
    contentGacha.style.backgroundColor = "black"
    contentGacha.style.zIndex = "100"
    cardBtnGacha.style.display = "flex"
    btnGachaAgain.style.display ="block"
})

btnGachaAgain.addEventListener("click", async () => {
    for (i = 0; i < 10; i++) {
        const randomNum = Math.floor(Math.random() * 16) + 0
        randomNumber.push(randomNum)
    }
    console.log("asd")
    video.style.zIndex = "161"
    video.play()

    await new Promise((resolve) => setTimeout(resolve, 7500))


    const load = document.createElement("div")
    load.classList.add("load")
    load.style.backgroundColor = "black"
    contentGacha.append(load)
    video.style.zIndex = "-10"

    await new Promise((resolve) => setTimeout(resolve, 2000))

    load.style.backgroundColor = "black"
    hasilGacha.style.display = "flex"




    await new Promise((resolve) => setTimeout(resolve, 100))



    let data = await inventory.length - 1
    const dataGacha = await gacha
    for (let i = 0; i <= data; i++) {
        await dataGacha[i].remove()
    }

    await new Promise((resolve) => setTimeout(resolve, 200))

    imgHasilGacha.src = hero[randomNumber[0]].src
    namaHasilGacha.textContent = hero[randomNumber[0]].name
    roleHasilGacha.textContent = `${hero[randomNumber[0]].role}/${hero[randomNumber[0]].elemen}`
    ratingHasilGacha.textContent = hero[randomNumber[0]].rating
    load.style.backgroundColor = "transparent"
    load.style.transition = "0.9s"

    await new Promise((resolve) => setTimeout(resolve, 1300))
    load.remove()
})

btnClose.addEventListener("click", async () => {
    const data = await inventory.length - 1
    const dataGacha = await gacha
    for (let i = 0; i <= data; i++) {
        await dataGacha[i].remove()
    }

    await randomNumber.splice(0, randomNumber.length)

    

    cardBtnGacha.style.display = "none"

    await new Promise((resolve) => setTimeout(resolve, 200))

    contentGacha.style.backgroundColor = "transparent"
    contentGacha.style.paddingTop = "0"
    contentGacha.style.zIndex = "-10"
})

const loadBanner = async (image, color, name, bgPosition) => {
    const load = document.createElement("div")
    load.classList.add("load")
    container.append(load)

    await new Promise((resolve) => setTimeout(resolve, 100))

    load.style.backgroundColor = "black"

    await new Promise((resolve) => setTimeout(resolve, 500))

    nameContent.style.color = color
    nameContent.textContent = name
    load.style.transition = "0.4s"
    load.style.backgroundColor = "transparent"
    content.style.backgroundImage = `url(${image})`
    if (bgPosition) {
        content.style.backgroundPositionY = `${bgPosition}`

    }

    await new Promise((resolve) => setTimeout(resolve, 100))

    load.remove()
}

const screenW = window.innerWidth
const handleList = (e1, e2, e3, e4, e5, warna) => {
    const screenW = window.innerWidth
    if (screenW <= 800) {
        e1.style.paddingLeft = "0px"
    } else {
        e1.style.paddingLeft = "70px"
    }
    e1.style.backgroundColor = warna
    e2.style.paddingLeft = "0"
    e2.style.backgroundColor = "#ffffff80"
    e3.style.paddingLeft = "0"
    e3.style.backgroundColor = "#ffffff80"
    e4.style.paddingLeft = "0"
    e4.style.backgroundColor = "#ffffff80"
    e5.style.paddingLeft = "0"
    e5.style.backgroundColor = "#ffffff80"
}

if (screenW <= 800) {
    listApi.style.paddingLeft = "0"
    listAir.style.paddingLeft = "0"
    listAngin.style.paddingLeft = "0"
    listCahaya.style.paddingLeft = "0"
    listGelap.style.paddingLeft = "0"
}
api.addEventListener("click", async () => {
    loadBanner('images/backgroundMakima.jpg', 'red', 'Makima')

    await new Promise((resolve) => setTimeout(resolve, 400))

    handleList(listApi, listAir, listAngin, listCahaya, listGelap, 'red')
})

air.addEventListener("click", async () => {
    loadBanner('images/backgroundChisato.jpg', 'cyan', 'Chisato')

    await new Promise((resolve) => setTimeout(resolve, 400))

    handleList(listAir, listApi, listAngin, listCahaya, listGelap, 'cyan')
})

angin.addEventListener("click", async () => {
    loadBanner('images/backgroundTatsumaki.jpg', '#56ff72', 'Tatsumaki')

    await new Promise((resolve) => setTimeout(resolve, 400))

    handleList(listAngin, listApi, listAir, listCahaya, listGelap, '#56ff72')

    // const load = document.createElement("div")
    // load.classList.add("load")
    // load.style.backgroundColor = "black"
    // contentGacha.append(load)
    // hasilGacha.style.display = "flex"
    // contentGacha.style.backgroundColor = "black"
    // contentGacha.style.zIndex = "100"
    // contentGacha.style.paddingTop = "70px"
    // cardBtnGacha.style.display = "flex"
})

cahaya.addEventListener("click", async () => {
    loadBanner('images/backgroundSaber.png', '#ffda5e', 'Artroria', '33%')

    await new Promise((resolve) => setTimeout(resolve, 400))

    handleList(listCahaya, listApi, listAir, listAngin, listGelap, '#ffda5e')
})

gelap.addEventListener("click", async () => {
    loadBanner('images/backgroundAlbedo.jpg', 'purple', 'Albedo', '30%')

    await new Promise((resolve) => setTimeout(resolve, 400))

    handleList(listGelap, listApi, listAir, listAngin, listCahaya, 'purple')
})

btnInventory.addEventListener("click", async () => {
    cardInventory.style.background = "rgba(0, 0, 0, 0.9)"
    cardInventory.style.zIndex = "51"
    await inventory
    for (let i = 0; i < inventory.length; i++) {
        const cardinven = document.createElement("div")
        cardinven.classList.add("cardInven")
        cardinven.style.backgroundImage = `url(${inventory[i].src})`
        cardResult.push(cardinven)
        contentInventory.append(cardinven)
    }
})

// btnInventory.addEventListener("mouseover", (event) => {
//     let x = event.clientX
//     let y = event.clientY
//     showInventory.style.display = "block"
//     showInventory.style.left = `${x + 8}px`
//     showInventory.style.top = `${y + 17}px`
//     showInventory.textContent = "Inventory"
// })

btn1Kali.addEventListener("click", async () => {
    c++
    btnGachaAgain.style.display ="none"
    const randomNum = Math.floor(Math.random() * 16) + 0
    randomNumber.push(randomNum)

    video.style.zIndex = "161"
    video.play()
    console.log(randomNumber)

    await new Promise((resolve) => setTimeout(resolve, 7500))

    const load = document.createElement("div")
    load.classList.add("load")
    load.style.backgroundColor = "black"
    contentGacha.append(load)
    hasilGacha.style.display = "flex"
    contentGacha.style.backgroundColor = "black"
    contentGacha.style.zIndex = "100"
    cardBtnGacha.style.display = "flex"

    
    await new Promise((resolve) => setTimeout(resolve, 500))
    
    load.style.backgroundColor = "black"
    
    
    await new Promise((resolve) => setTimeout(resolve, 800))
    
    
    
    
    imgHasilGacha.src = hero[randomNumber[0]].src
    namaHasilGacha.textContent = hero[randomNumber[0]].name
    roleHasilGacha.textContent = `${hero[randomNumber[0]].role}/${hero[randomNumber[0]].elemen}`
    ratingHasilGacha.textContent = hero[randomNumber[0]].rating
    await new Promise((resolve) => setTimeout(resolve, 800))
    load.style.backgroundColor = "transparent"
    load.style.transition = "0.9s"
    video.style.zIndex = "-10"
    load.remove()
})

const closeInventory = async () => {
    await cardResult
    cardInventory.style.background = "transparent"
    cardInventory.style.zIndex = "-10"
    for (let i = 0; i < cardResult.length; i++) {
        cardResult[i].remove()
    }
}

closeBtnInventory.addEventListener("click", () => {
    closeInventory()
    // imgHasilGacha.src = hero[randomNumber[0]].src
    // namaHasilGacha.textContent = hero[randomNumber[0]].name
    // roleHasilGacha.textContent = `${hero[randomNumber[0]].role}/${hero[randomNumber[0]].elemen}`
    // ratingHasilGacha.textContent = hero[randomNumber[0]].rating
})

addEventListener("keydown", (callback) => {
    if (callback.key == "Escape") {
        closeInventory()
    }
})

btnInventory.addEventListener("mouseover", (event) => {
    let x = event.clientX
    let y = event.clientY
    showInventory.style.display = "block"
    showInventory.style.left = `${x + 8}px`
    showInventory.style.top = `${y + 17}px`
    showInventory.textContent = "Inventory"
})

btnInventory.addEventListener("mouseout", () => {
    showInventory.style.display = "none"
    showInventory.textContent = ""
})

// btnInventory.addEventListener("mouseover", (event) => {
    //     let x = event.clientX
    //     let y = event.clientY
    //     showInventory.style.display = "block"
    //     showInventory.style.left = `${x + 8}px`
    //     showInventory.textContent = "Inventory"
    // })